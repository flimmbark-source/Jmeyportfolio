---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects')).sort((a, b) => a.data.order - b.data.order);
const featuredProjects = projects.filter((project) => project.data.image);
const testimonialEntry = (await getCollection('testimonials'))[0];
const testimonial = testimonialEntry?.data;

const stats = [
  { label: 'Avg uplift in key metrics', value: '32%' },
  { label: 'User interviews', value: '300+' },
  { label: 'Cross-functional teams partnered with', value: '15' }
];

const flagshipCopy = {
  idl: {
    eyebrow: 'Flagship 1 – IDL Workflow Reimagined',
    title: 'Rebuilding a 1,000-store rollout workflow',
    oneLiner: 'Cut store drawing time from 8 hours to 37 minutes and saved ~7.4k hours across a retail rollout.',
    tags: ['Workflow design', 'Automation', 'Ops tools']
  },
  'ai-archiving': {
    eyebrow: 'Flagship 2 – AI Archiving Assistant',
    title: 'AI assistant for a 60k+ item archive',
    oneLiner: 'Designed a human-in-the-loop tagging tool that saves researchers ~5 hours a week with 92% tag accuracy.',
    tags: ['AI/ML', 'Knowledge management', 'Trust & governance']
  }
};

const flagshipProjects = featuredProjects.filter(({ data }) => data.slug && flagshipCopy[data.slug]);
const supportingProjects = featuredProjects.filter(({ data }) => !data.slug || !flagshipCopy[data.slug]);

const toolbox = ['Journey Mapping', 'Rapid Prototyping', 'Service Blueprints', 'Usability Testing', 'Accessibility Audits', 'Design Systems'];

const principles = [
  {
    title: 'Co-create with users',
    description: 'I surface the signal fast so teams decide together.',
    bullets: ['Run weekly research sprints', 'Host participatory design workshops', 'Instrument usability analytics dashboards']
  },
  {
    title: 'Design for equity',
    description: 'Spotting tradeoffs before they ship.',
    bullets: ['Audit accessibility scorecards', 'Build localization-ready systems', 'Apply trauma-informed heuristics']
  },
  {
    title: 'Ship with confidence',
    description: 'Releasing faster without losing quality.',
    bullets: ['Lead KPI-focused design reviews', 'Maintain token-driven systems', 'Plan experiment roadmaps']
  }
];

const processSteps = [
  {
    step: '01',
    title: 'Discover',
    description: 'Frame the opportunity with stakeholder interviews, desk research, and ecosystem mapping.'
  },
  {
    step: '02',
    title: 'Align',
    description: 'Co-create hypotheses, success metrics, and prioritization frameworks with cross-functional teams.'
  },
  {
    step: '03',
    title: 'Experiment',
    description: 'Prototype rapidly, validate through mixed-method research, and iterate with measurable feedback.'
  },
  {
    step: '04',
    title: 'Scale',
    description: 'Turn what we learned into safeguards, habits, and dashboards that keep impact going.'
  }
];
---
<BaseLayout
  title="Jacob Meyerkopf | Product Designer Portfolio"
  description="Product designer blending research, service design, and experimentation to ship measurable outcomes."
  mainClass="mx-auto max-w-6xl px-6 pb-24 pt-16"
>
  <section id="top" class="mb-28 grid gap-12 lg:grid-cols-[1.1fr_0.9fr] lg:items-center" data-animate-on-scroll data-animate-initial>
    <div>
      <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Jacob Meyerkopf · Product designer &amp; researcher</p>
      <h1 class="mt-6 text-4xl font-black leading-tight sm:text-5xl md:text-6xl">I design tools that save teams thousands of hours.</h1>
      <p class="mt-4 max-w-2xl text-lg text-slate-700 dark:text-slate-200">
        I’m Jacob, a product designer &amp; researcher in Tel Aviv. I turn messy workflows and AI/automation ideas into interfaces people trust and actually use.
      </p>
      <div class="mt-8 flex flex-wrap gap-4">
        <a
          href="#projects"
          class="cta-button cta-button--accent inline-flex items-center rounded-full bg-gradient-to-r from-brand-600 via-indigo-500 to-purple-500 px-6 py-3 font-semibold text-white shadow-elevated transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-950"
        >
          View selected work
        </a>
        <a
          href="#process"
          class="cta-button cta-button--subtle inline-flex items-center rounded-full border border-slate-300 px-6 py-3 font-semibold text-slate-700 transition hover:border-brand-500 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400 dark:hover:text-brand-200 dark:focus-visible:ring-offset-slate-950"
        >
          See my process
        </a>
      </div>
      <dl class="mt-10 flex flex-wrap gap-8">
        {stats.map((stat) => (
          <div class="min-w-[140px]">
            <dt class="text-sm font-medium text-slate-700 dark:text-slate-300">{stat.label}</dt>
            <dd class="text-3xl font-bold">{stat.value}</dd>
          </div>
        ))}
      </dl>
    </div>
    <aside
      class="space-y-6 rounded-3xl border border-slate-200/70 bg-white/80 p-8 shadow-lg transition dark:border-slate-800/60 dark:bg-slate-900/70"
      data-animate-on-scroll
      data-animate-delay="0.15s"
    >
      <h2 class="text-sm font-semibold uppercase tracking-[0.35em] text-brand-600">Recent recognition</h2>
      <p class="text-base text-slate-700 dark:text-slate-200">
        "Jacob reframed a stalled project with assumption-mapping workshops and weekly tests. We hit every milestone with confidence." — <strong>Senior Scout, NextStep Basketball</strong>
      </p>
      <div class="flex flex-wrap gap-3">
        <span class="pill">DesignOps</span>
        <span class="pill">Inclusive Research</span>
        <span class="pill">Design Systems</span>
      </div>
    </aside>
  </section>

  <section id="about" class="mb-28 grid gap-12 lg:grid-cols-[1.1fr_0.9fr] lg:items-start" data-animate-on-scroll>
    <div class="space-y-7">
      <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">About</p>
      <h2 class="text-3xl font-bold sm:text-4xl">I bridge product strategy with evidence-based UX</h2>
      <div class="space-y-4">
        <p class="text-lg leading-relaxed text-slate-600 dark:text-slate-300">
          Habits that keep velocity high while keeping every decision stay measurable and inclusive.
        </p>
      </div>
      <ul class="space-y-3 text-base leading-relaxed text-slate-600 dark:text-slate-300">
        <li class="flex gap-3"><span class="mt-1 inline-flex h-2.5 w-2.5 shrink-0 rounded-full bg-brand-500"></span>Assumption-mapping workshops that turn research into confident bets.</li>
        <li class="flex gap-3"><span class="mt-1 inline-flex h-2.5 w-2.5 shrink-0 rounded-full bg-brand-500"></span>Prototyping AI-enabled workflows to surface edge cases before build.</li>
        <li class="flex gap-3"><span class="mt-1 inline-flex h-2.5 w-2.5 shrink-0 rounded-full bg-brand-500"></span>Measurable outcomes with product, research, and engineering partners.</li>
      </ul>
    </div>
    <div class="space-y-6 rounded-3xl border border-slate-200/70 bg-gradient-to-br from-brand-50 via-white to-transparent p-8 shadow-lg transition dark:border-slate-800/60 dark:from-brand-900/40 dark:via-slate-900 dark:to-transparent">
      <h3 class="text-lg font-semibold text-slate-900 dark:text-white">Toolbox &amp; methods</h3>
      <div class="grid grid-cols-2 gap-3 text-sm text-slate-700 dark:text-slate-200 sm:grid-cols-3">
        {toolbox.map((item) => (
          <span class="rounded-2xl border border-slate-200/80 px-3 py-2 text-center dark:border-slate-700">{item}</span>
        ))}
      </div>
    </div>
  </section>

  <section id="projects" class="mb-28" data-animate-on-scroll>
    <div class="mb-12 flex items-end justify-between gap-4">
      <div>
        <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Selected work</p>
        <h2 class="text-3xl font-bold sm:text-4xl">Flagship product design projects</h2>
        <p class="mt-3 text-base font-medium text-slate-700 dark:text-slate-200">Two high-impact case studies up front, with more work further down for context.</p>
      </div>
      <p class="hidden max-w-md text-sm text-slate-700 dark:text-slate-300 lg:block">Built with research-driven workflows, automation, and AI-assisted tooling that deliver measurable outcomes.</p>
    </div>

    <div class="space-y-16">
      <div class="grid gap-8 lg:grid-cols-2">
        {flagshipProjects.map((project, index) => {
          const data = project.data;
          const copy = data.slug ? flagshipCopy[data.slug] : undefined;
          return (
            <article
              class="relative overflow-hidden rounded-3xl border-2 border-brand-500/30 bg-white/90 p-8 shadow-xl transition hover:-translate-y-1 hover:shadow-2xl dark:border-brand-400/30 dark:bg-slate-900/80"
              data-animate-on-scroll
              data-animate-delay={`${index * 80}ms`}
            >
              <div class={`grid gap-6 ${data.image ? 'md:grid-cols-[1.05fr_0.95fr]' : ''}`}>
                <div class="space-y-4">
                  {copy && <p class="text-xs font-semibold uppercase tracking-[0.3em] text-brand-600">{copy.eyebrow}</p>}
                  <h3 class="text-2xl font-semibold text-slate-900 dark:text-white">{copy?.title || data.title}</h3>
                  <p class="text-base text-slate-700 dark:text-slate-200">{copy?.oneLiner || data.summary}</p>
                  {copy?.tags && (
                    <div class="flex flex-wrap gap-2">
                      {copy.tags.map((tag) => (
                        <span class="pill">{tag}</span>
                      ))}
                    </div>
                  )}
                  {data.links && (
                    <div class="flex flex-wrap gap-3">
                      {data.links.map((link) => (
                        <a
                          href={link.href}
                          target={link.external ? '_blank' : undefined}
                          rel={link.external ? 'noopener noreferrer' : undefined}
                          class={
                            link.variant === 'primary'
                              ? 'inline-flex items-center font-semibold text-brand-600 transition hover:text-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-950'
                              : 'inline-flex items-center font-semibold text-slate-700 transition hover:text-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-slate-200 dark:focus-visible:ring-offset-slate-950'
                          }
                        >
                          {link.label}<span aria-hidden="true" class="ml-2">→</span>
                        </a>
                      ))}
                    </div>
                  )}
                </div>
                {data.image && (
                  <figure class="overflow-hidden rounded-2xl border border-slate-200/80 bg-slate-100/70 p-3 dark:border-slate-800/60 dark:bg-slate-900/60">
                    <img src={data.image.src} alt={data.image.alt} class="w-full rounded-xl object-cover" loading="lazy" />
                  </figure>
                )}
              </div>
            </article>
          );
        })}
      </div>

      {supportingProjects.length > 0 && (
        <div class="space-y-6">
          <div class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
            <div class="space-y-2">
              <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">More selected work</p>
              <h3 class="text-2xl font-semibold text-slate-900 dark:text-white">Additional collaborations</h3>
              <p class="text-base font-medium text-slate-700 dark:text-slate-200">Snapshots from civic tech, climate, and sports experiences.</p>
            </div>
          </div>
          <div class="grid gap-6 md:grid-cols-2">
            {supportingProjects.map((project, index) => {
              const data = project.data;
              return (
                <article
                  class="rounded-2xl border border-slate-200/80 bg-white/70 p-6 shadow-md transition hover:-translate-y-1 hover:shadow-lg dark:border-slate-800/60 dark:bg-slate-900/70"
                  data-animate-on-scroll
                  data-animate-delay={`${index * 60}ms`}
                >
                  <div class="space-y-4">
                    <div class="flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between">
                      <div class="space-y-2 sm:max-w-[65%]">
                        <p class="text-xs font-semibold uppercase tracking-[0.25em] text-brand-600">{data.tagline}</p>
                        <h4 class="text-xl font-semibold text-slate-900 dark:text-white">{data.title}</h4>
                        <p class="text-sm text-slate-700 dark:text-slate-200">{data.summary}</p>
                      </div>
                      {data.image && (
                        <figure class="overflow-hidden rounded-xl border border-slate-200/70 bg-slate-100/70 p-2 dark:border-slate-800/60 dark:bg-slate-900/60 sm:h-full sm:min-w-[140px]">
                          <img src={data.image.src} alt={data.image.alt} class="h-28 w-full rounded-lg object-cover" loading="lazy" />
                        </figure>
                      )}
                    </div>
                    {data.links && (
                      <div class="flex flex-wrap gap-3">
                        {data.links.map((link) => (
                          <a
                            href={link.href}
                            target={link.external ? '_blank' : undefined}
                            rel={link.external ? 'noopener noreferrer' : undefined}
                            class="inline-flex items-center font-semibold text-slate-800 transition hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-slate-100 dark:focus-visible:ring-offset-slate-950"
                          >
                            {link.label}<span aria-hidden="true" class="ml-2">→</span>
                          </a>
                        ))}
                      </div>
                    )}
                  </div>
                </article>
              );
            })}
          </div>
        </div>
      )}
    </div>
  </section>

  <section id="principles" class="mb-28" data-animate-on-scroll>
    <div class="mb-12 flex items-end justify-between gap-4">
      <div>
        <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Principles</p>
        <h2 class="text-3xl font-bold sm:text-4xl">Modern UX/UI principles I bring to every engagement</h2>
        <p class="mt-3 text-base font-medium text-slate-500 dark:text-slate-400">Why it matters: these safeguards keep multidisciplinary teams focused on fair outcomes for people who usually get overlooked.
          Each principle is grounded in proven frameworks and supported by regular sessions that keep cross-functional teams aligned.</p>
      </div>
    </div>
    <div class="grid gap-6 md:grid-cols-3">
      {principles.map((principle, index) => (
        <article
          class="principle-card rounded-3xl border border-slate-200/80 bg-white/80 p-6 shadow-lg transition dark:border-slate-800/60 dark:bg-slate-900/70"
          data-animate-on-scroll
          data-animate-delay={`${index * 70}ms`}
        >
          <h3 class="text-lg font-semibold text-slate-900 dark:text-white">{principle.title}</h3>
          <p class="mt-3 text-sm leading-relaxed text-slate-700 dark:text-slate-200">{principle.description}</p>
          <ul class="mt-4 space-y-3 text-sm leading-relaxed text-slate-700 dark:text-slate-300">
            {principle.bullets.map((bullet) => (
              <li>• {bullet}</li>
            ))}
          </ul>
        </article>
      ))}
    </div>
  </section>

  <section id="process" class="mb-28" data-animate-on-scroll>
    <div class="mb-12 flex items-end justify-between gap-4">
      <div>
        <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Process</p>
        <h2 class="text-3xl font-bold sm:text-4xl">Momentum and measurable outcomes</h2>
        <p class="mt-3 text-base font-medium text-slate-700 dark:text-slate-200">For teams needing clarity on how we move from research insight to scaled release without losing speed.
        Every engagement moves through evidence, alignment, and experimentation to reduce risk and ship with confidence.</p>
      </div>
    </div>
    <div class="grid gap-6 md:grid-cols-4">
      {processSteps.map((step, index) => (
        <article
          class="process-step rounded-3xl border border-slate-200/80 bg-white/80 p-6 shadow-lg transition dark:border-slate-800/60 dark:bg-slate-900/70"
          data-animate-on-scroll
          data-animate-delay={`${index * 60}ms`}
        >
          <span class="text-sm font-semibold text-brand-600">{step.step}</span>
          <h3 class="mt-3 text-lg font-semibold">{step.title}</h3>
          <p class="mt-3 text-sm text-slate-700 dark:text-slate-200">{step.description}</p>
        </article>
      ))}
    </div>
  </section>

  {testimonial && (
    <section class="mb-28" data-animate-on-scroll>
      <div class="grid gap-12 rounded-3xl border border-slate-200/70 bg-white/80 p-8 shadow-lg transition dark:border-slate-800/60 dark:bg-slate-900/70 lg:grid-cols-[1.1fr_0.9fr] lg:items-center">
        <div class="space-y-6">
          <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Collaboration snapshot</p>
          <h2 class="text-3xl font-bold sm:text-4xl">What partners say</h2>
          <p class="text-base font-medium text-slate-700 dark:text-slate-200">Why it matters: testimonials show how design ops, research, and facilitation unlock stalled initiatives.</p>
          <blockquote class="text-lg text-slate-700 dark:text-slate-200">“{testimonial.quote}”</blockquote>
          <p class="text-sm text-slate-700 dark:text-slate-300">— {testimonial.source}</p>
        </div>
        <div class="space-y-4 rounded-3xl border border-slate-200/80 bg-gradient-to-br from-brand-50 via-white to-transparent p-6 text-sm text-slate-700 dark:border-slate-800/60 dark:from-brand-900/30 dark:via-slate-900 dark:text-slate-300">
          <h3 class="text-base font-semibold">Engagement highlights</h3>
          <ul class="space-y-3">
            {testimonial.highlights.map((highlight) => (
              <li class="flex items-start gap-3">
                <span class="mt-1 inline-flex h-2.5 w-2.5 shrink-0 rounded-full bg-brand-500"></span>
                {highlight}
              </li>
            ))}
          </ul>
        </div>
      </div>
    </section>
  )}

  <section
    id="contact"
    class="rounded-3xl border border-brand-500/20 bg-gradient-to-r from-brand-600 via-indigo-500 to-purple-500 p-[1px] shadow-xl"
    data-animate-on-scroll
  >
    <div class="rounded-[calc(1.5rem-1px)] bg-white p-10 text-center dark:bg-slate-950">
      <p class="text-sm font-semibold uppercase tracking-[0.3em] text-brand-600">Let's build what's next</p>
      <h2 class="mt-4 text-3xl font-bold text-slate-900 dark:text-white sm:text-4xl">Ready to turn complexity into momentum?</h2>
      <p class="mt-3 text-base font-medium text-slate-700 dark:text-slate-200">For leaders seeking a partner who can translate ambiguity into confident product moves.</p>
      <p class="mt-4 text-lg text-slate-700 dark:text-slate-200">
        I'm exploring opportunities across product design, UX research, and emerging AI-driven roles. Share your challenge and I'll respond within two business days.
      </p>
      <div class="mt-8 flex flex-wrap justify-center gap-4">
        <a
          href="mailto:jmeyerkopf@gmail.com"
          class="cta-button cta-button--accent inline-flex items-center rounded-full bg-slate-900 px-6 py-3 font-semibold text-white shadow-lg transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900 dark:bg-white dark:text-slate-900 dark:focus-visible:ring-slate-900 dark:focus-visible:ring-offset-slate-50"
        >
          Let's talk
        </a>
        <a
          href="https://www.linkedin.com/in/jacobmeyerkopf/"
          target="_blank"
          rel="noopener noreferrer"
          class="cta-button cta-button--subtle inline-flex items-center rounded-full border border-slate-300 px-6 py-3 font-semibold text-slate-700 transition hover:border-brand-500 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400 dark:hover:text-brand-200 dark:focus-visible:ring-offset-slate-950"
        >
          Connect on LinkedIn
        </a>
      </div>
    </div>
  </section>
</BaseLayout>

<script is:inline>
  (() => {
    const animatedElements = document.querySelectorAll('[data-animate-on-scroll]');
    if (!animatedElements.length) return;

    const reduceMotionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
    const shouldReduce = reduceMotionQuery.matches;

    const revealElement = (element) => {
      element.classList.add('is-visible');
    };

    animatedElements.forEach((element) => {
      const delay = element.dataset.animateDelay;
      if (delay) {
        element.style.transitionDelay = delay;
      }
    });

    if (shouldReduce || !('IntersectionObserver' in window)) {
      animatedElements.forEach(revealElement);
      return;
    }

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            revealElement(entry.target);
            observer.unobserve(entry.target);
          }
        });
      },
      { rootMargin: '0px 0px 20% 0px', threshold: 0 }
    );

    animatedElements.forEach((element) => {
      if (element.dataset.animateInitial !== undefined) {
        requestAnimationFrame(() => revealElement(element));
      } else {
        observer.observe(element);
      }
    });
  })();
</script>
